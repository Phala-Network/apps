import {useClipboard} from '@phala/react-hooks'
import React, {ComponentProps, MouseEventHandler} from 'react'
import {toast} from 'react-toastify'
import {CopyIcon} from './styledComponets'

type Props = {
  value: string
} & ComponentProps<typeof CopyIcon>

export const Copy: React.FC<Props> = (props) => {
  const {value, ...omittedProps} = props

  const {copy} = useClipboard()

  const onClick: MouseEventHandler<HTMLElement> = (e) => {
    e.stopPropagation()
    copy(value)
    toast('Copied to clipboard')
  }

  return (
    <CopyIcon
      {...omittedProps}
      onClick={onClick}
      width="16"
      height="16"
      viewBox="0 0 16 16"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M5.70801 0.083313H14.458C14.8448 0.083313 15.2157 0.236958 15.4892 0.510449C15.7627 0.78394 15.9163 1.15487 15.9163 1.54165V10.2916C15.9163 10.6784 15.7627 11.0494 15.4892 11.3228C15.2157 11.5963 14.8448 11.75 14.458 11.75H5.70801C5.32123 11.75 4.9503 11.5963 4.67681 11.3228C4.40332 11.0494 4.24968 10.6784 4.24968 10.2916V1.54165C4.24968 1.15487 4.40332 0.78394 4.67681 0.510449C4.9503 0.236958 5.32123 0.083313 5.70801 0.083313ZM5.70801 1.33331C5.65276 1.33331 5.59977 1.35526 5.5607 1.39433C5.52163 1.4334 5.49968 1.48639 5.49968 1.54165V10.2916C5.49968 10.319 5.50506 10.3461 5.51553 10.3714C5.526 10.3966 5.54135 10.4196 5.5607 10.439C5.58004 10.4583 5.60301 10.4737 5.62828 10.4841C5.65356 10.4946 5.68065 10.5 5.70801 10.5H14.458C14.5133 10.5 14.5663 10.478 14.6053 10.439C14.6444 10.3999 14.6663 10.3469 14.6663 10.2916V1.54165C14.6663 1.48639 14.6444 1.4334 14.6053 1.39433C14.5663 1.35526 14.5133 1.33331 14.458 1.33331H5.70801ZM10.4997 13C10.4997 12.8342 10.5655 12.6753 10.6827 12.558C10.7999 12.4408 10.9589 12.375 11.1247 12.375C11.2904 12.375 11.4494 12.4408 11.5666 12.558C11.6838 12.6753 11.7497 12.8342 11.7497 13V14.4583C11.7497 14.8451 11.596 15.216 11.3225 15.4895C11.049 15.763 10.6781 15.9166 10.2913 15.9166H1.54134C1.15457 15.9166 0.783634 15.763 0.510144 15.4895C0.236653 15.216 0.0830078 14.8451 0.0830078 14.4583V5.70831C0.0830078 5.32154 0.236653 4.95061 0.510144 4.67712C0.783634 4.40363 1.15457 4.24998 1.54134 4.24998H2.99968C3.16544 4.24998 3.32441 4.31583 3.44162 4.43304C3.55883 4.55025 3.62468 4.70922 3.62468 4.87498C3.62468 5.04074 3.55883 5.19971 3.44162 5.31692C3.32441 5.43413 3.16544 5.49998 2.99968 5.49998H1.54134C1.48609 5.49998 1.4331 5.52193 1.39403 5.561C1.35496 5.60007 1.33301 5.65306 1.33301 5.70831V14.4583C1.33301 14.5136 1.35496 14.5666 1.39403 14.6056C1.4331 14.6447 1.48609 14.6666 1.54134 14.6666H10.2913C10.3466 14.6666 10.3996 14.6447 10.4387 14.6056C10.4777 14.5666 10.4997 14.5136 10.4997 14.4583V13Z"
        fill="#111111"
      />
    </CopyIcon>
  )
}
